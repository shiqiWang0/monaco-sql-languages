var u=Object.defineProperty;var g=(r,n,e)=>n in r?u(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e;var c=(r,n,e)=>(g(r,typeof n!="symbol"?n+"":n,e),e);import{B as f,V as l,O as i,W as H,s as b,X as p}from"./index-3dac6dbc.js";import{i as x}from"./isUndefined-aa0326a0.js";class S extends f{constructor(){super("menuBar");c(this,"state");c(this,"setMenus",e=>{this.dispatch(s=>{s.data=e})});c(this,"onSelect",e=>{this.subscribe(p.onSelect,e)});this.state=new l}get(e){return new i(this.getState().data).getNode(e)}update(e,s){this.dispatch(o=>{const t=new i(o.data).getNode(typeof e=="object"?e.id:e);t&&Object.assign(t,typeof e=="object"?e:s==null?void 0:s(t))})}toggleChecked(e){this.update(e,s=>({icon:H(s.icon)}))}add(e,s){this.dispatch(o=>{const t=new i(o.data).getNode(s);t&&(t.children??(t.children=[]),t.children.push(e))})}remove(e){this.dispatch(s=>{var d,h;const a=new i(s.data).getParent(e);if(!a)return;const t=(d=a.children)==null?void 0:d.findIndex(b(e));t===-1||x(t)||(h=a.children)==null||h.splice(t,1)})}reset(){this.setState(new l)}onContextMenu(e){this.subscribe(p.onContextMenu,e)}}export{S as MenuBarService};
