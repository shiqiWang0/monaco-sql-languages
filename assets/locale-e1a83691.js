var p=Object.defineProperty;var L=(s,r,t)=>r in s?p(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var o=(s,r,t)=>(L(s,typeof r!="symbol"?r+"":r,t),t);import{B as E,s as u,y as f,S as O,U as m,f as x}from"./index-3dac6dbc.js";import{i as g}from"./isUndefined-aa0326a0.js";var h=(s=>(s.onChange="localization.onChange",s))(h||{});class l{constructor(r=[],t){this.data=r,this.current=t}}const c=class c extends E{constructor(){super("locale");o(this,"state");o(this,"localize",(t,e="",...n)=>{const i=this.getCurrentLocale();if(!i)return e;let a=i.source[t];return n.length&&n.forEach(d=>{a=a==null?void 0:a.replace(c.LOCALIZE_REPLACED_WORD,d)}),a||e});this.state=new l}getAll(){return this.getState().data}get(t){if(!g(t))return this.getState().data.find(u(t))}getCurrent(){return this.getState().current}getCurrentLocale(){return this.get(this.getCurrent())}removeLocale(t){this.dispatch(e=>{var a;const n=e.data.findIndex(u(t));if(n===-1)return;const i=(a=f(e.data,n))==null?void 0:a.id;g(i)||(e.data.splice(n,1),e.current=i)})}setCurrent(t){const e=this.getCurrent();this.dispatch(n=>{n.current=t}),e!==this.getCurrent()&&(this.emit(h.onChange,e,this.getCurrent()),O(m,t.toString()))}add(t){this.dispatch(e=>{e.data.push(...x(t))})}reset(){this.state=new l}onChange(t){this.subscribe(h.onChange,t)}};o(c,"LOCALIZE_REPLACED_WORD","${i}");let C=c;export{C as LocaleService};
