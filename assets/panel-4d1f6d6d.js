var u=Object.defineProperty;var b=(o,n,t)=>n in o?u(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var h=(o,n,t)=>(b(o,typeof n!="symbol"?n+"":n,t),t);import{B as c,aH as l,s as r,f as d,y as g,aI as i}from"./index-d3ae3cf9.js";class C extends c{constructor(){super("panel");h(this,"state");this.state=new l}get(t){return this.getAll().find(r(t))}getAll(){return this.getState().data}getToolbar(t){return this.getState().toolbar.find(r(t))}getPanelToolbar(t,e){var a,s;return(s=(a=this.get(t))==null?void 0:a.toolbar)==null?void 0:s.find(r(e))}add(t){this.dispatch(e=>{e.data.push(...d(t))})}update(t,e){this.dispatch(a=>{const s=a.data.find(r(typeof t=="object"?t.id:t));s&&Object.assign(s,typeof t=="object"?t:e==null?void 0:e(s))})}remove(t){this.dispatch(e=>{var s;const a=e.data.findIndex(r(t));a!==-1&&(e.current===t&&(e.current=(s=g(e.data,a))==null?void 0:s.id),e.data.splice(a,1))})}setCurrent(t){this.dispatch(e=>{e.current=t})}open(t){const e=this.get(t.id);e?this.setCurrent(e.id):(this.add(t),this.setCurrent(t.id))}addToolbar(t){this.dispatch(e=>{e.toolbar.push(...d(t))})}updateToolbar(t,e){this.dispatch(a=>{const s=a.toolbar.find(r(typeof t=="object"?t.id:t));s&&Object.assign(s,typeof t=="object"?t:e==null?void 0:e(s))})}toggle(t){this.update(t,e=>({hidden:!e.hidden}))}reset(){this.setState(new l)}onChange(t){this.subscribe(i.onChange,t)}onToolbarClick(t){this.subscribe(i.onToolbarClick,t)}onClose(t){this.subscribe(i.onClose,t)}onContextMenu(t){this.subscribe(i.onContextMenu,t)}}export{C as PanelService};
