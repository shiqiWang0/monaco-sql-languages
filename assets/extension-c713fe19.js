var w=Object.defineProperty;var P=(c,t,e)=>t in c?w(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var l=(c,t,e)=>(P(c,typeof t!="symbol"?t+"":t,e),e);import{B as S,s as u,f as D,L as h,i as G,e as a}from"./index-3dac6dbc.js";class d{constructor(t=[]){this.data=t}}var I=Object.defineProperty,K=Object.getOwnPropertyDescriptor,L=(c,t,e,i)=>{for(var r=i>1?void 0:i?K(t,e):t,s=c.length-1,n;s>=0;s--)(n=c[s])&&(r=(i?n(t,e,r):n(r))||r);return i&&r&&I(t,e,r),r},o=(c,t)=>(e,i)=>t(e,i,c);let f=class extends S{constructor(t,e,i,r,s,n,m,p,y,x,b,g,v,B,A,T,_,E,C,j,M,O){super("extension");l(this,"state");l(this,"_predicate",()=>!0);l(this,"getContext",()=>({locale:this.locale,builtin:this.builtin,contextMenu:this.contextMenu,auxiliaryBar:this.auxiliaryBar,layout:this.layout,statusBar:this.statusBar,menuBar:this.menuBar,activityBar:this.activityBar,sidebar:this.sidebar,explorer:this.explorer,folderTree:this.folderTree,panel:this.panel,output:this.output,editor:this.editor,colorTheme:this.colorTheme,action:this.action,editorTree:this.editorTree,notification:this.notification,search:this.search,settings:this.settings}));this.locale=t,this.builtin=e,this.contextMenu=i,this.auxiliaryBar=r,this.layout=s,this.statusBar=n,this.menuBar=m,this.activityBar=p,this.sidebar=y,this.explorer=x,this.folderTree=b,this.panel=g,this.output=v,this.editor=B,this.colorTheme=A,this.action=T,this.editorTree=_,this.notification=E,this.search=C,this.settings=j,this.monaco=M,this.module=O,this.state=new d}isExtension(t){return t?typeof t=="object"&&["activate","id","name"].every(e=>e in t):!1}get(t){return this.getAll().find(u(t))}getAll(){return this.getState().data}inactive(t){this._predicate=t}add(t){this.dispatch(e=>{e.data.push(...D(t))})}load(t){const e=this.getAll();Array.isArray(e)&&e.filter(this._predicate).forEach(i=>{this.isExtension(i)&&i.contributes&&this.loadContributes(i.contributes,t)})}activate(){const t=this.getAll();if(!Array.isArray(t))return;const e=this.getContext();t.filter(this._predicate).forEach(i=>{this.isExtension(i)&&i.activate(e,this.monaco)})}loadContributes(t,e){Object.keys(t).forEach(r=>{switch(r){case h.Themes:{const s=t[r];if(!Array.isArray(s))return;this.colorTheme.add(s);break}case h.Languages:{const s=t[r];if(!Array.isArray(s))return;this.locale.add(s);break}case h.Commands:{const s=t[r];if(!Array.isArray(s))return;s.forEach(n=>this.action.registerAction(n));break}case h.Modules:{const s=t[r];if(!s)return;Object.keys(s).forEach(n=>{this.module.update(n,s[n])});break}case h.Grammar:{const s=t[r];this.colorTheme._activeGrammar(s,e);break}}})}dispose(t){var r;const e=this.getContext(),i=this.get(t);i&&((r=i.dispose)==null||r.call(i,e),this.dispatch(s=>{const n=s.data.findIndex(u(t));n!==-1&&s.data.splice(n,1)}))}disposeAll(){this.getAll().forEach(e=>{var r;const i=this.getContext();(r=e.dispose)==null||r.call(e,i)}),this.reset()}reset(){this.setState(new d)}};f=L([G(),o(0,a("locale")),o(1,a("builtin")),o(2,a("contextMenu")),o(3,a("auxiliaryBar")),o(4,a("layout")),o(5,a("statusBar")),o(6,a("menuBar")),o(7,a("activityBar")),o(8,a("sidebar")),o(9,a("explorer")),o(10,a("folderTree")),o(11,a("panel")),o(12,a("output")),o(13,a("editor")),o(14,a("colorTheme")),o(15,a("action")),o(16,a("editorTree")),o(17,a("notification")),o(18,a("search")),o(19,a("settings")),o(20,a("monaco")),o(21,a("module"))],f);export{f as ExtensionService};
